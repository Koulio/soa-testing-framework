<?xml version="1.0" encoding="UTF-8"?>
<stfconf:soaTestingFrameworkConfiguration
    xmlns:stfconf="http://www.archenroot.org/SOATestingFramework/Config"
    xmlns:dbconf="http://www.archenroot.org/SOATestingFramework/Config/Database"
    xmlns:jmsconf="http://www.archenroot.org/SOATestingFramework/Config/JMS"
    xmlns:osbconf="http://www.archenroot.org/SOATestingFramework/Config/OSB"
    xmlns:mapconf="http://www.archenroot.org/SOATestingFramework/Config/Mapping"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.archenroot.org/SOATestingFramework/Config 
    file:../schema/SoaTestingFramework.xsd">
    
    
    <scenario name="EBS_PCM_002">
        <scenario step 2>
            <source>
             <stfconf:database identificator="eis/DBAdapter/XXXI">
                 <dbconf:dbObjects>
                     <dbconf:dbObject name="XXXIW_MW_PO_VENDOR_CONTS_EXT">
                         <dbconf:customValue columnName="INT_STATUS" columnValue="V"/>
                     </dbconf:dbObject>
                 </dbconf:dbObjects>
             </stfconf:database>
            </source>
            <target>
             <queue identificator="Premaintain">
                 <messageSchema name="x.xsd"></messageSchema>
             </queue>
            </target>
        </sekvence>
        <scenario step 2>
            <source>
                <stfconf:database identificator="VendorContacts_DB">
                    <dbconf:dbObjects>
                        <dbconf:dbObject name="XXXIW_MW_PO_VENDOR_CONTS_EXT">
                            <dbconf:customValue columnName="INT_STATUS" columnValue="V"/>
                        </dbconf:dbObject>
                    </dbconf:dbObjects>
                </stfconf:database>    
            </source>
            <target>
                <queue identificator="bge.Vendors.MaintainQueue">
                    <messageSchema name="x.xsd"></messageSchema>
                </queue>
            </target>
        </sekvence>
    </scenario>
    <scenario name="EBS_PCM_002">
        <sekvence 1>
            <source>
                <stfconf:database identificator="VendorContacts_DB">
                    <dbconf:dbObjects>
                        <dbconf:dbObject name="XXXIW_MW_PO_VENDOR_CONTS_EXT">
                            <dbconf:customValue columnName="INT_STATUS" columnValue="V"/>
                        </dbconf:dbObject>
                    </dbconf:dbObjects>
                </stfconf:database>
            </source>
            <target>
                <queue identificator="Premaintain">
                    <messageSchema name="x.xsd"></messageSchema>
                </queue>
            </target>
        </sekvence>
        <sekvence 2>
            <source>
                <stfconf:database identificator="VendorContacts_DB">
                    <dbconf:dbObjects>
                        <dbconf:dbObject name="XXXIW_MW_PO_VENDOR_CONTS_EXT">
                            <dbconf:customValue columnName="INT_STATUS" columnValue="V"/>
                        </dbconf:dbObject>
                    </dbconf:dbObjects>
                </stfconf:database>    
            </source>
            <target>
                <queue identificator="bge.Vendors.MaintainQueue">
                    <messageSchema name="y.xsd"></messageSchema>
                </queue>
            </target>
        </sekvence>
    </scenario>
            <scenario name="EBS_PCM_002">
                <sekvence 1>
                    <source>
                        <stfconf:database identificator="VendorContacts_DB">
                            <dbconf:dbObjects>
                                <dbconf:dbObject name="XXXIW_MW_PO_VENDOR_CONTS_EXT">
                                    <dbconf:customValue columnName="INT_STATUS" columnValue="V"/>
                                </dbconf:dbObject>
                            </dbconf:dbObjects>
                        </stfconf:database>
                    </source>
                    <target>
                        <queue identificator="Premaintain">
                            <messageSchema name="x.xsd"></messageSchema>
                        </queue>
                    </target>
                </sekvence>
                <sekvence 2>
                    <source>
                        <stfconf:database identificator="VendorContacts_DB">
                            <dbconf:dbObjects>
                                <dbconf:dbObject name="XXXIW_MW_PO_VENDOR_CONTS_EXT">
                                    <dbconf:customValue columnName="INT_STATUS" columnValue="V"/>
                                </dbconf:dbObject>
                            </dbconf:dbObjects>
                        </stfconf:database>    
                    </source>
                    <target>
                        <queue identificator="bge.Vendors.MaintainQueue">
                            <messageSchema name="y.xsd"></messageSchema>
                        </queue>
                    </target>
                </sekvence>
            </scenario>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <scenario name="EBS_PCM_003">
        
    </scenario>
    <scenario name="EBS_PCM_004>
        
    </scenario>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <stfconf:jms identificator="IWCommonJMSServer_VendorContacts_prequeue_O47C">
        <jmsconf:messageSchema relativeURI="test/jms/schema/Int047VendorsMaintainAdapterContacts_table.xsd"/>
    </stfconf:jms>
    
    <stfconf:jms identificator="IWCommonJMSServer_prequeue_O47S">
        <jmsconf:server name="IWCommonJMSServer"/>
        <jmsconf:connectionFactory name="bge.XAConnectionFactory" jndiName="bge.XAConnectionFactory"/>
        <jmsconf:messageSchema relativeURI="test/jms/schema/Int047VendorsMaintainAdapterSites_table.xsd"/>
        <jmsconf:queue name="bge.Vendors.PreMaintainQueue047S" jndiName="bge/Vendors/PreMaintainQueue047S"/>
    </stfconf:jms>
    
    <stfconf:jms identificator="IWCommonJMSServer_prequeue_O47V">
        <jmsconf:server name="IWCommonJMSServer"/>
        <jmsconf:connectionFactory name="iw.XAConnectionFactory" jndiName="iw/XAConnectionFactory"/>
        <jmsconf:messageSchema relativeURI="test/jms/schema/VendorMaintainPollingPS_table.xsd"/>
        <jmsconf:queue name="iw.Vendors.PreMaintainQueue047V" jndiName="iw/Vendors/PreMaintainQueue047V"/>
    </stfconf:jms>
    
    <stfconf:jms identificator="IWCommonJMSServer_master_queue_047C">
        <jmsconf:server name="IWCommonJMSServer"/>
        <jmsconf:connectionFactory name="bge.XAConnectionFactory" jndiName="bge/XAConnectionFactory"/>
        <jmsconf:messageSchema relativeURI="test/jms/schema/VendorsSitesAndContacts_201006.xsd"/>
        <jmsconf:queue name="bge.Vendors.MaintainQueue" jndiName="bge/Vendors/MaintainQueue"/>
    </stfconf:jms>
   
   
    
    
    
    
    <stfconf:mapping identificator="Validate_VendorContactDB_with_queue_047C_message">
        <mapconf:fromComponent identificator="VendorContacts_DB" componentType="Database" object="XXXIW_MW_PO_VENDOR_CONTS_EXT"/>
        <mapconf:toComponent identificator="IWCommonJMSServer_VendorContacts_prequeue_O47C" componentType="JMS"/>
        <mapconf:customMappings>
            <mapconf:mapping fromName="INT_STATUS" toName=""/>
        </mapconf:customMappings>
    </stfconf:mapping>
    
    <stfconf:mapping identificator="Validate_047C_with_master_queue">
        <mapconf:fromComponent identificator="IWCommonJMSServer_VendorContacts_prequeue_O47C" componentType="JMS" object="1"/>
        <mapconf:toComponent identificator="IWCommonJMSServer_master_queue_047C" componentType="JMS" object="1"/>
        <mapconf:customMappings>
            <mapconf:mapping fromName="INT_STATUS" toName=""/>
            <mapconf:mapping fromName="LAST_UPDATE_LOGIN" toName="TEST"/>
        </mapconf:customMappings>
        
    </stfconf:mapping>    
    <db-to-queue patern="db-queue">
        <scenar 1 type="EBS_PCM_002"">
            <sekvence name="db-to-prequeu>
                krok 1
                krok 2
            <sekvence db-to-prequeu>
                krok 1
                krok 2
            <sekvence db-to-prequeu>
                krok 1
                krok 2 - check error queue
            </sekvence>
        </scenar>
        
        <scenar 2 type="EBS_PCM_002"">
            <sekvence db-to-prequeu>
                krok 1
                krok 2
            </sekvence>
            <sekvence PREQUEU-TO-QUEUE>
                krok 1
                krok 2
            </sekvence>
            <sekvence QUEUE-TO-ENDPOINT>
                krok 1
                krok 2
            </sekvence>
        </scenar>
        
        <scenar 3 type="EBS_PCM_002"">
            <sekvence db-to-prequeu>
                krok 1
                krok 2
            </sekvence>
            <sekvence PREQUEU-TO-QUEUE>
                krok 1
                krok 2
            </sekvence>
            <sekvence QUEUE-TO-ENDPOINT>
                krok 1
                krok 2
            </sekvence>
        </scenar>
        
        
        <interface identificator="A" pattern=db-queueh></interface>
        <interface identificator="B" db-queue-lada-jech></interface>
        <interface identificator="B" pattern=beta></interface>
        <paterns>
            <patern db-queueh>
                <all type of elementGroup={sekvence1, sekvence2, sekvence3}
                <sekvence 1= "Vypne OSB sluzbu" name="db-to-prequeu>
                    krok 1
                    krok 2
                 <sekvence db-to-prequeu>
                        krok 1
                        krok 2
                 <sekvence db-to-prequeu>
                            krok 1
                            krok 2 - check error queue
               </sekvence>
            </patern>
            <patern db-queue-lada-jech>
                <step OSB_DISABLE_SERVICE></step>
                <step FTP_SEND_FILE></step>
            </patern>
            <patern beta>
                <step OSB_DISABLE_SERVICE></step>
                <step FTP_SEND_FILE></step>
            </patern>
        </paterns>
</stfconf:soaTestingFrameworkConfiguration>
